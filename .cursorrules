# ç»¿è‰²æ™ºèƒ½èˆ¹è‰‡å†œæ–‡æ—…å¹³å° - å¼€å‘è¿›åº¦è®°å½•

## é¡¹ç›®æ¦‚è¿°
åŸºäºFastAPIæ¡†æ¶å¼€å‘çš„ç»¿è‰²æ™ºèƒ½èˆ¹è‰‡å†œæ–‡æ—…å¹³å°ï¼Œä½¿ç”¨MySQLæ•°æ®åº“ã€‚

## ç”¨æˆ·è§’è‰²
1. ç®¡ç†å‘˜ (Admin) - å¹³å°ç®¡ç†æƒé™
2. å•†å®¶ (Merchant) - èˆ¹è‰‡æœåŠ¡æä¾›å•†
3. ç”¨æˆ· (User) - æ™®é€šæ¸¸å®¢ç”¨æˆ·
4. èˆ¹å‘˜ (Crew) - èˆ¹è‰‡æ“ä½œäººå‘˜

## å·²å®Œæˆçš„æ“ä½œ âœ…
- [x] é¡¹ç›®ç›®å½•ç»“æ„åˆå§‹åŒ–
- [x] Gitä»“åº“åˆå§‹åŒ–
- [x] é¡¹ç›®ä¾èµ–é…ç½® (requirements.txt)
- [x] åº”ç”¨é…ç½®ç®¡ç† (app/config/settings.py)
- [x] æ•°æ®åº“è¿æ¥é…ç½® (app/config/database.py)
- [x] ç”¨æˆ·è§’è‰²æšä¸¾å®šä¹‰ (app/models/enums.py)
- [x] æ•°æ®åº“æ¨¡å‹ä¼˜åŒ– (ç²¾ç®€15ä¸ªå­—æ®µï¼Œåˆ é™¤2ä¸ªå¤æ‚æ¨¡å‹)
- [x] ç”¨æˆ·æ•°æ®æ¨¡å‹åˆ›å»º (app/models/user.py)
- [x] å•†å®¶æ•°æ®æ¨¡å‹ (app/models/merchant.py)
- [x] èˆ¹å‘˜æ•°æ®æ¨¡å‹ (app/models/crew_info.py)
- [x] èˆ¹è‰‡æ•°æ®æ¨¡å‹ (app/models/boat.py)
- [x] è®¢å•æ•°æ®æ¨¡å‹ (app/models/order.py) - æ”¯æŒèˆ¹è‰‡é¢„çº¦å’Œæ´¾å•
- [x] æœåŠ¡æ•°æ®æ¨¡å‹ (app/models/service.py)
- [x] å®åè®¤è¯æ•°æ®æ¨¡å‹ (app/models/identity_verification.py)
- [x] Pydanticæ¨¡å¼å®šä¹‰ (app/schemas/)
  - [x] ç”¨æˆ·æ¨¡å¼ (app/schemas/user.py)
  - [x] å•†å®¶æ¨¡å¼ (app/schemas/merchant.py)
  - [x] èˆ¹å‘˜æ¨¡å¼ (app/schemas/crew.py)
  - [x] èˆ¹è‰‡æ¨¡å¼ (app/schemas/boat.py)
  - [x] è®¢å•æ¨¡å¼ (app/schemas/order.py) - å®Œæ•´çš„é¢„çº¦å’Œæ´¾å•æ¨¡å¼
  - [x] å®åè®¤è¯æ¨¡å¼ (app/schemas/identity_verification.py)
  - [x] é€šç”¨æ¨¡å¼ (app/schemas/common.py)
- [x] JWTå®‰å…¨å·¥å…·å®ç° (app/utils/security.py)
- [x] è®¤è¯ä¾èµ–é¡¹ (app/utils/deps.py)
- [x] è…¾è®¯äº‘COSæ–‡ä»¶ä¸Šä¼ å·¥å…· (app/utils/cos_client.py)
- [x] CRUDæ“ä½œå®ç°
  - [x] ç”¨æˆ·CRUD (app/crud/user.py)
  - [x] å•†å®¶CRUD (app/crud/merchant.py)
  - [x] èˆ¹å‘˜CRUD (app/crud/crew.py)
  - [x] èˆ¹è‰‡CRUD (app/crud/boat.py)
  - [x] è®¢å•CRUD (app/crud/order.py) - å®Œæ•´çš„é¢„çº¦å’Œæ´¾å•åŠŸèƒ½
  - [x] æœåŠ¡CRUD (app/crud/service.py)
  - [x] å®åè®¤è¯CRUD (app/crud/identity_verification.py)
- [x] APIè·¯ç”±å®Œæ•´å®ç°
  - [x] ç”¨æˆ·è®¤è¯API (app/routers/auth.py)
  - [x] ç”¨æˆ·ç®¡ç†API (app/routers/users.py)
  - [x] å•†å®¶ç®¡ç†API (app/routers/merchants.py)
  - [x] èˆ¹å‘˜ç®¡ç†API (app/routers/crews.py)
  - [x] èˆ¹è‰‡ç®¡ç†API (app/routers/boats.py)
  - [x] è®¢å•ç®¡ç†API (app/routers/orders.py) - ç”¨æˆ·é¢„çº¦ã€å•†å®¶æ´¾å•ã€èˆ¹å‘˜æ¥å•
  - [x] å®åè®¤è¯API (app/routers/identity_verification.py)
  - [x] æ–‡ä»¶ä¸Šä¼ API (app/routers/upload.py)
  - [x] ç®¡ç†å‘˜åŠŸèƒ½API (app/routers/admin.py)
- [x] FastAPIä¸»åº”ç”¨é…ç½® (main.py)
- [x] å®Œæ•´APIæ–‡æ¡£ (API_DOCUMENTATION.md)
- [x] é¡¹ç›®æ–‡æ¡£æ›´æ–° (README.md)

## å½“å‰æ­£åœ¨è¿›è¡Œçš„æ“ä½œ ğŸ”„
- [x] è®¢å•é¢„çº¦ç³»ç»Ÿå¼€å‘ï¼ˆå·²å®Œæˆï¼‰
- [ ] æµ‹è¯•å’ŒéªŒè¯å®Œæ•´APIåŠŸèƒ½
- [ ] æ•°æ®åº“åˆå§‹åŒ–å’Œæµ‹è¯•æ•°æ®åˆ›å»º
- [ ] å‰ç«¯æ¥å£å¯¹æ¥æµ‹è¯•

## å·²å®Œæˆçš„æ ¸å¿ƒåŠŸèƒ½ âœ…

### 1. åŸºç¡€æ¶æ„ âœ…
- [x] ç¯å¢ƒå˜é‡é…ç½®æ”¯æŒ
- [x] è§’è‰²æƒé™ç®¡ç†ç³»ç»Ÿ
- [x] JWTè®¤è¯æˆæƒ
- [x] APIå“åº”æ ‡å‡†åŒ–
- [x] åˆ†é¡µæŸ¥è¯¢æ”¯æŒ
- [x] é”™è¯¯å¤„ç†æœºåˆ¶

### 2. ç”¨æˆ·ç³»ç»Ÿ âœ…
- [x] ç”¨æˆ·æ³¨å†Œç™»å½•
- [x] ç”¨æˆ·ä¿¡æ¯ç®¡ç†
- [x] ç”¨æˆ·çŠ¶æ€ç®¡ç†
- [x] è§’è‰²æƒé™æ§åˆ¶
- [x] ç”¨æˆ·éªŒè¯åŠŸèƒ½

### 3. å•†å®¶ç®¡ç†ç³»ç»Ÿ âœ…
- [x] å•†å®¶ä¿¡æ¯ç®¡ç†
- [x] å•†å®¶è®¤è¯åŠŸèƒ½
- [x] å•†å®¶çŠ¶æ€æ§åˆ¶
- [x] å•†å®¶åˆ—è¡¨æŸ¥è¯¢
- [x] å•†å®¶æ•°æ®ç»Ÿè®¡

### 4. èˆ¹å‘˜ç®¡ç†ç³»ç»Ÿ âœ…
- [x] èˆ¹å‘˜ä¿¡æ¯ç®¡ç†
- [x] èˆ¹å‘˜çŠ¶æ€ç®¡ç†
- [x] èˆ¹å‘˜è¯„åˆ†ç³»ç»Ÿ
- [x] èˆ¹å‘˜èµ„è´¨ç®¡ç†
- [x] å¯ç”¨èˆ¹å‘˜æŸ¥è¯¢

### 5. èˆ¹è‰‡ç®¡ç†ç³»ç»Ÿ âœ…
- [x] èˆ¹è‰‡åŸºç¡€ä¿¡æ¯ç®¡ç†
- [x] èˆ¹è‰‡ç±»å‹ç®¡ç†
- [x] èˆ¹è‰‡çŠ¶æ€ç®¡ç†
- [x] èˆ¹è‰‡ä½ç½®è¿½è¸ª
- [x] å¯ç”¨èˆ¹è‰‡æŸ¥è¯¢

### 6. ç®¡ç†å‘˜åŠŸèƒ½ âœ…
- [x] ç³»ç»Ÿä»ªè¡¨æ¿
- [x] ç”¨æˆ·ç®¡ç†
- [x] è§’è‰²æƒé™ç®¡ç†
- [x] æ•°æ®ç»Ÿè®¡åˆ†æ
- [x] ç³»ç»ŸçŠ¶æ€ç›‘æ§

### 7. è®¢å•é¢„çº¦ç³»ç»Ÿ âœ…
- [x] ç”¨æˆ·é¢„çº¦ä¸‹å•
- [x] å•†å®¶è®¢å•ç®¡ç†
- [x] æ™ºèƒ½æ´¾å•åŠŸèƒ½
- [x] èˆ¹å‘˜æ¥å•ç®¡ç†
- [x] è®¢å•çŠ¶æ€è¿½è¸ª
- [x] è®¢å•ç»Ÿè®¡åˆ†æ
- [x] æ—¶é—´å†²çªæ£€æŸ¥
- [x] å¯ç”¨èµ„æºæŸ¥è¯¢

### 8. å®åè®¤è¯ç³»ç»Ÿ âœ…
- [x] èº«ä»½ä¿¡æ¯æ”¶é›†
- [x] è¯ä»¶ç…§ç‰‡ä¸Šä¼ 
- [x] ç®¡ç†å‘˜å®¡æ ¸
- [x] è®¤è¯çŠ¶æ€ç®¡ç†
- [x] è®¤è¯è®°å½•æŸ¥è¯¢
- [x] è¯ä»¶ç±»å‹æ”¯æŒ

### 9. æ–‡ä»¶ä¸Šä¼ ç³»ç»Ÿ âœ…
- [x] è…¾è®¯äº‘COSé›†æˆ
- [x] å¤šç±»å‹æ–‡ä»¶ä¸Šä¼ 
- [x] æ–‡ä»¶å®‰å…¨éªŒè¯
- [x] ç”¨æˆ·æƒé™æ§åˆ¶
- [x] æ–‡ä»¶ç®¡ç†åŠŸèƒ½
- [x] è‡ªåŠ¨åˆ†ç±»å­˜å‚¨

## æŠ€æœ¯æ ˆ
- **åç«¯æ¡†æ¶**: FastAPI 0.104.1
- **æ•°æ®åº“**: MySQL
- **ORM**: SQLAlchemy 2.0.23
- **è®¤è¯**: JWT (JSON Web Tokens)
- **å¯†ç åŠ å¯†**: bcrypt
- **APIæ–‡æ¡£**: Swagger/OpenAPI
- **ç¯å¢ƒç®¡ç†**: python-dotenv

## å¼€å‘è§„èŒƒ
- ä½¿ç”¨Pythonç±»å‹æç¤º
- éµå¾ªRESTful APIè®¾è®¡åŸåˆ™
- å®ç°é€‚å½“çš„é”™è¯¯å¤„ç†å’ŒçŠ¶æ€ç 
- ç¼–å†™APIæ–‡æ¡£å’Œæ³¨é‡Š
- ä½¿ç”¨Pydanticè¿›è¡Œæ•°æ®éªŒè¯
- å®ç°æ—¥å¿—è®°å½•

## å½“å‰å¯ç”¨çš„APIæ¥å£

### è®¤è¯ç›¸å…³ (/api/v1/auth) âœ…
- **POST /register** - ç”¨æˆ·æ³¨å†Œ
- **POST /login** - ç”¨æˆ·ç™»å½•
- **GET /me** - è·å–å½“å‰ç”¨æˆ·ä¿¡æ¯
- **POST /logout** - ç”¨æˆ·ç™»å‡º

### ç”¨æˆ·ç®¡ç† (/api/v1/users) âœ…
- **PUT /me** - æ›´æ–°å½“å‰ç”¨æˆ·ä¿¡æ¯
- **GET /{user_id}** - è·å–ç”¨æˆ·è¯¦æƒ…
- **PUT /{user_id}** - æ›´æ–°ç”¨æˆ·ä¿¡æ¯

### å•†å®¶ç®¡ç† (/api/v1/merchants) âœ…
- **POST /** - åˆ›å»ºå•†å®¶ä¿¡æ¯
- **GET /** - è·å–å•†å®¶åˆ—è¡¨
- **GET /me** - è·å–æˆ‘çš„å•†å®¶ä¿¡æ¯
- **GET /{merchant_id}** - è·å–å•†å®¶è¯¦æƒ…
- **PUT /me** - æ›´æ–°æˆ‘çš„å•†å®¶ä¿¡æ¯
- **PUT /{merchant_id}** - æ›´æ–°å•†å®¶ä¿¡æ¯
- **POST /{merchant_id}/verify** - å•†å®¶è®¤è¯
- **POST /{merchant_id}/activate** - æ¿€æ´»/åœç”¨å•†å®¶
- **DELETE /{merchant_id}** - åˆ é™¤å•†å®¶

### èˆ¹å‘˜ç®¡ç† (/api/v1/crews) âœ…
- **POST /** - åˆ›å»ºèˆ¹å‘˜ä¿¡æ¯
- **GET /** - è·å–èˆ¹å‘˜åˆ—è¡¨
- **GET /available** - è·å–å¯ç”¨èˆ¹å‘˜
- **GET /me** - è·å–æˆ‘çš„èˆ¹å‘˜ä¿¡æ¯
- **GET /{crew_id}** - è·å–èˆ¹å‘˜è¯¦æƒ…
- **PUT /me** - æ›´æ–°æˆ‘çš„èˆ¹å‘˜ä¿¡æ¯
- **PUT /{crew_id}** - æ›´æ–°èˆ¹å‘˜ä¿¡æ¯
- **PUT /{crew_id}/status** - æ›´æ–°èˆ¹å‘˜çŠ¶æ€
- **PUT /{crew_id}/rating** - èˆ¹å‘˜è¯„åˆ†
- **DELETE /{crew_id}** - åˆ é™¤èˆ¹å‘˜

### èˆ¹è‰‡ç®¡ç† (/api/v1/boats) âœ…
- **POST /** - åˆ›å»ºèˆ¹è‰‡ä¿¡æ¯
- **GET /** - è·å–èˆ¹è‰‡åˆ—è¡¨
- **GET /available** - è·å–å¯ç”¨èˆ¹è‰‡
- **GET /my** - è·å–æˆ‘çš„èˆ¹è‰‡
- **GET /{boat_id}** - è·å–èˆ¹è‰‡è¯¦æƒ…
- **PUT /{boat_id}** - æ›´æ–°èˆ¹è‰‡ä¿¡æ¯
- **PUT /{boat_id}/status** - æ›´æ–°èˆ¹è‰‡çŠ¶æ€
- **PUT /{boat_id}/location** - æ›´æ–°èˆ¹è‰‡ä½ç½®
- **DELETE /{boat_id}** - åˆ é™¤èˆ¹è‰‡

### è®¢å•ç®¡ç† (/api/v1/orders) âœ…
#### ç”¨æˆ·è®¢å•æ¥å£
- **POST /** - åˆ›å»ºè®¢å•
- **GET /my** - è·å–æˆ‘çš„è®¢å•
- **GET /my/{order_id}** - è·å–è®¢å•è¯¦æƒ…
- **POST /my/{order_id}/cancel** - å–æ¶ˆè®¢å•

#### å•†å®¶è®¢å•ç®¡ç†æ¥å£
- **GET /merchant** - è·å–å•†å®¶è®¢å•
- **POST /merchant/{order_id}/assign-crew** - æ´¾å•ç»™èˆ¹å‘˜
- **PUT /merchant/{order_id}/status** - æ›´æ–°è®¢å•çŠ¶æ€
- **GET /merchant/{order_id}/available-crews** - è·å–å¯æ´¾å•èˆ¹å‘˜
- **GET /merchant/stats** - å•†å®¶è®¢å•ç»Ÿè®¡

#### èˆ¹å‘˜è®¢å•æ¥å£
- **GET /crew/my** - è·å–æˆ‘çš„èˆ¹å‘˜è®¢å•
- **PUT /crew/{order_id}/status** - èˆ¹å‘˜æ›´æ–°è®¢å•çŠ¶æ€

### å®åè®¤è¯ (/api/v1/identity-verification) âœ…
- **POST /submit** - æäº¤å®åè®¤è¯ç”³è¯·
- **GET /my** - è·å–æˆ‘çš„è®¤è¯è®°å½•
- **GET /my/{verification_id}** - è·å–è®¤è¯è¯¦æƒ…
- **GET /admin/list** - ç®¡ç†å‘˜è·å–è®¤è¯åˆ—è¡¨
- **GET /admin/{verification_id}** - ç®¡ç†å‘˜è·å–è®¤è¯è¯¦æƒ…
- **POST /admin/{verification_id}/review** - ç®¡ç†å‘˜å®¡æ ¸è®¤è¯

### æ–‡ä»¶ä¸Šä¼  (/api/v1/upload) âœ…
- **POST /avatar** - ä¸Šä¼ å¤´åƒ
- **POST /identity** - ä¸Šä¼ èº«ä»½è®¤è¯æ–‡ä»¶
- **POST /boat** - ä¸Šä¼ èˆ¹è‰‡å›¾ç‰‡
- **POST /service** - ä¸Šä¼ æœåŠ¡å›¾ç‰‡
- **POST /product** - ä¸Šä¼ äº§å“å›¾ç‰‡
- **POST /review** - ä¸Šä¼ è¯„ä»·å›¾ç‰‡
- **DELETE /{file_key}** - åˆ é™¤æ–‡ä»¶

### ç®¡ç†å‘˜åŠŸèƒ½ (/api/v1/admin) âœ…
- **GET /dashboard** - ä»ªè¡¨æ¿æ•°æ®
- **GET /users** - æ‰€æœ‰ç”¨æˆ·åˆ—è¡¨
- **GET /users/{user_id}** - ç”¨æˆ·è¯¦æƒ…
- **PUT /users/{user_id}** - æ›´æ–°ç”¨æˆ·ä¿¡æ¯
- **PUT /users/{user_id}/status** - æ›´æ–°ç”¨æˆ·çŠ¶æ€
- **PUT /users/{user_id}/role** - æ›´æ–°ç”¨æˆ·è§’è‰²
- **PUT /users/{user_id}/verify** - éªŒè¯ç”¨æˆ·
- **GET /system/stats** - ç³»ç»Ÿç»Ÿè®¡